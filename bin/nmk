#!/bin/sh

nmk_dir=$(CDPATH= cd -- "$(dirname -- "$(dirname -- "$0")")" && pwd)

if [ -e "$NMK_ENTRYPOINT" ]; then
    exec "$NMK_ENTRYPOINT" "$@"
fi

for launcher in nmk.rs nmk.go; do
    if command -v $launcher >/dev/null 2>&1; then
        exec $launcher "$@"
    fi
    if [ -x "$nmk_dir/bin/$launcher" ]; then
        exec "$nmk_dir/bin/$launcher" "$@"
    fi
done

exec python "$nmk_dir/bin/nmk.py" "$@"
